{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import io from'socket.io-client';import{Star,StarHalf}from'lucide-react';import{StarRatingDisplay,StarRatingInput}from'./StarRating';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CommunityRecipeItem=_ref=>{let{recipe}=_ref;const[comments,setComments]=useState([]);const[ratings,setRatings]=useState([]);const[averageRating,setAverageRating]=useState(0);const[totalRatings,setTotalRatings]=useState(0);const[showComments,setShowComments]=useState(false);const[newComment,setNewComment]=useState('');const[userRating,setUserRating]=useState(0);const[userId]=useState(localStorage.getItem('userId')||generateUserId());const[username,setUsername]=useState(localStorage.getItem('username')||'');const[showUserPrompt,setShowUserPrompt]=useState(!localStorage.getItem('username'));// Using useRef for socket\nconst socketRef=useRef(null);const[isConnected,setIsConnected]=useState(false);// Generate a simple user ID if not exists\nfunction generateUserId(){const newId=Math.random().toString(36).substring(2,15);localStorage.setItem('userId',newId);return newId;}// Connect to WebSocket when component mounts\nuseEffect(()=>{if(showUserPrompt||!username)return;// Store username for future sessions\nlocalStorage.setItem('username',username);// Connect to socket.io server\nconst newSocket=io(window.location.origin,{reconnection:true,reconnectionAttempts:5,reconnectionDelay:1000,timeout:20000});// for testing purposes on localhost\n// const newSocket = io('http://localhost:5000', {\n//   reconnection: true,\n//   reconnectionAttempts: 5,\n//   reconnectionDelay: 1000,\n//   timeout: 20000\n// });\nnewSocket.on('connect',()=>{console.log('Socket connected for recipe community features');setIsConnected(true);// Mark socket as connected\n// Join the recipe room\nnewSocket.emit('join-recipe',{recipeId:recipe.id,userId,username});});newSocket.on('recipe-data',data=>{console.log('Received recipe community data:',data);setComments(data.comments||[]);setRatings(data.ratings||[]);setAverageRating(data.averageRating||0);setTotalRatings(data.totalRatings||0);});newSocket.on('comment-added',newComment=>{console.log('New comment received:',newComment);setComments(prevComments=>[newComment,...prevComments]);});newSocket.on('rating-updated',data=>{setRatings(prevRatings=>[data.rating,...prevRatings]);setAverageRating(data.averageRating);setTotalRatings(data.totalRatings);});newSocket.on('connect_error',err=>{console.error('Socket connection error:',err.message);});// Save socket in ref to avoid re-render\nsocketRef.current=newSocket;// Clean up on unmount\nreturn()=>{if(newSocket){newSocket.disconnect();setIsConnected(false);// Mark socket as disconnected\n}};},[recipe.id,userId,username,showUserPrompt]);// Handle setting username\nconst handleSetUsername=e=>{e.preventDefault();if(username.trim().length>0){setShowUserPrompt(false);localStorage.setItem('username',username);}};// Handle submitting a comment\nconst handleAddComment=e=>{e.preventDefault();if(!newComment.trim())return;// Debugging connection state\nconsole.log('Socket connection status:',socketRef.current?socketRef.current.connected:'No socket');if(!socketRef.current||!socketRef.current.connected){console.error('Socket connection not found. Comment not sent.');alert('Socket connection not found. Please try again later.');return;}console.log('Sending comment:',newComment);socketRef.current.emit('add-comment',{recipeId:recipe.id,userId,username,text:newComment,timestamp:new Date().toISOString()});setNewComment('');};// Handle submitting a rating\nconst handleAddRating=rating=>{if(!socketRef.current||!socketRef.current.connected)return;setUserRating(rating);socketRef.current.emit('add-rating',{recipeId:recipe.id,userId,username,rating,timestamp:new Date().toISOString()});};// Format date\nconst formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleString();};// Render stars based on rating\n// const renderStars = (rating) => {\n//   const stars = [];\n//   const fullStars = Math.floor(rating);\n//   const hasHalfStar = rating % 1 >= 0.5;\n//   for (let i = 0; i < fullStars; i++) {\n//     stars.push(\n//       <Star \n//         key={`full-${i}`} \n//         className=\"text-yellow-500\" \n//         fill=\"#EAB308\" \n//         size={16}\n//       />\n//     );\n//   }\n//   if (hasHalfStar) {\n//     stars.push(\n//       <StarHalf \n//         key=\"half\" \n//         className=\"text-yellow-500\" \n//         fill=\"#EAB308\" \n//         size={16}\n//       />\n//     );\n//   }\n//   return <div className=\"recipe-stars\">{stars}</div>;\n// };\nconst renderStars=rating=>{return/*#__PURE__*/_jsx(\"div\",{className:\"recipe-stars\",style:{display:'flex',alignItems:'center',gap:'2px'},children:[1,2,3,4,5].map(star=>{// Full star\nif(star<=Math.floor(rating)){return/*#__PURE__*/_jsx(Star,{size:16,fill:\"#EAB308\",color:\"#EAB308\",style:{display:'block',minWidth:'16px'}},`star-${star}`);}// Half star\nelse if(star===Math.ceil(rating)&&rating%1>=0.5){return/*#__PURE__*/_jsx(StarHalf,{size:16,fill:\"#EAB308\",color:\"#EAB308\",style:{display:'block',minWidth:'16px'}},`star-${star}`);}// Empty star\nelse{return/*#__PURE__*/_jsx(Star,{size:16,fill:\"none\",color:\"#cccccc\",style:{display:'block',minWidth:'16px'}},`star-${star}`);}})});};// If username prompt is shown\nif(showUserPrompt){return/*#__PURE__*/_jsxs(\"div\",{className:\"username-prompt-recipe\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Join the Community\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your name to rate and comment on recipes\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSetUsername,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),placeholder:\"Your name\",className:\"username-input\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"username-submit-btn\",children:\"Join\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"community-recipe-item\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"recipe-title\",children:recipe.title}),/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.title,className:\"recipe-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-rating-section\",style:{margin:'1rem 0'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"current-rating\",style:{display:'flex',alignItems:'center'},children:averageRating>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StarRatingDisplay,{rating:averageRating,size:16}),/*#__PURE__*/_jsxs(\"span\",{className:\"rating-count\",style:{fontSize:'0.8rem',color:'#666',marginLeft:'4px'},children:[\"(\",totalRatings,\")\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"no-ratings\",style:{fontStyle:'italic',color:'#666',fontSize:'0.9rem'},children:\"No ratings yet\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-rating\",style:{marginTop:'12px'},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'8px',fontSize:'0.9rem',color:'#552b5b'},children:\"Rate this recipe:\"}),/*#__PURE__*/_jsx(StarRatingInput,{value:userRating,onChange:handleAddRating,size:20})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"recipe-details\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Used Ingredients: \",recipe.usedIngredientCount]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Missed Ingredients: \",recipe.missedIngredientCount]}),/*#__PURE__*/_jsx(\"li\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"a\",{href:`https://spoonacular.com/recipes/${recipe.title}-${recipe.id}`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"recipe-link\",children:\"View Full Recipe\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-comments-section\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toggle-comments-btn\",onClick:()=>setShowComments(!showComments),children:showComments?'Hide Comments':`Show Comments (${comments.length})`}),showComments&&/*#__PURE__*/_jsxs(\"div\",{className:\"comments-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddComment,className:\"comment-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Add a comment...\",className:\"comment-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"comment-submit-btn\",disabled:!newComment.trim(),children:\"Post\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments-list\",children:comments.length>0?comments.map((comment,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",children:comment.username}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-date\",children:formatDate(comment.timestamp)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-text\",children:comment.text})]},index)):/*#__PURE__*/_jsx(\"p\",{className:\"no-comments\",children:\"No comments yet. Be the first to comment!\"})})]})]})]});};export default CommunityRecipeItem;","map":{"version":3,"names":["React","useState","useEffect","useRef","io","Star","StarHalf","StarRatingDisplay","StarRatingInput","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CommunityRecipeItem","_ref","recipe","comments","setComments","ratings","setRatings","averageRating","setAverageRating","totalRatings","setTotalRatings","showComments","setShowComments","newComment","setNewComment","userRating","setUserRating","userId","localStorage","getItem","generateUserId","username","setUsername","showUserPrompt","setShowUserPrompt","socketRef","isConnected","setIsConnected","newId","Math","random","toString","substring","setItem","newSocket","window","location","origin","reconnection","reconnectionAttempts","reconnectionDelay","timeout","on","console","log","emit","recipeId","id","data","prevComments","prevRatings","rating","err","error","message","current","disconnect","handleSetUsername","e","preventDefault","trim","length","handleAddComment","connected","alert","text","timestamp","Date","toISOString","handleAddRating","formatDate","dateString","date","toLocaleString","renderStars","className","style","display","alignItems","gap","children","map","star","floor","size","fill","color","minWidth","ceil","onSubmit","type","value","onChange","target","placeholder","required","title","src","image","alt","margin","fontSize","marginLeft","fontStyle","marginTop","marginBottom","usedIngredientCount","missedIngredientCount","href","rel","onClick","disabled","comment","index"],"sources":["C:/Users/DELL/OneDrive/Desktop/MS USA/IIT Chicago/Build Fellowship Project 1 Real time feature/a-cookbook/client/src/CommunityRecipeItem.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport io from 'socket.io-client';\r\nimport { Star, StarHalf } from 'lucide-react';\r\nimport { StarRatingDisplay, StarRatingInput } from './StarRating';\r\n\r\nconst CommunityRecipeItem = ({ recipe }) => {\r\n  const [comments, setComments] = useState([]);\r\n  const [ratings, setRatings] = useState([]);\r\n  const [averageRating, setAverageRating] = useState(0);\r\n  const [totalRatings, setTotalRatings] = useState(0);\r\n  const [showComments, setShowComments] = useState(false);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [userRating, setUserRating] = useState(0);\r\n  const [userId] = useState(localStorage.getItem('userId') || generateUserId());\r\n  const [username, setUsername] = useState(localStorage.getItem('username') || '');\r\n  const [showUserPrompt, setShowUserPrompt] = useState(!localStorage.getItem('username'));\r\n  \r\n  // Using useRef for socket\r\n  const socketRef = useRef(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  // Generate a simple user ID if not exists\r\n  function generateUserId() {\r\n    const newId = Math.random().toString(36).substring(2, 15);\r\n    localStorage.setItem('userId', newId);\r\n    return newId;\r\n  }\r\n\r\n  // Connect to WebSocket when component mounts\r\n  useEffect(() => {\r\n    if (showUserPrompt || !username) return;\r\n\r\n    // Store username for future sessions\r\n    localStorage.setItem('username', username);\r\n\r\n    // Connect to socket.io server\r\n    const newSocket = io(window.location.origin, {\r\n      reconnection: true,\r\n      reconnectionAttempts: 5,\r\n      reconnectionDelay: 1000,\r\n      timeout: 20000\r\n    });\r\n\r\n    // for testing purposes on localhost\r\n    // const newSocket = io('http://localhost:5000', {\r\n    //   reconnection: true,\r\n    //   reconnectionAttempts: 5,\r\n    //   reconnectionDelay: 1000,\r\n    //   timeout: 20000\r\n    // });\r\n\r\n    newSocket.on('connect', () => {\r\n      console.log('Socket connected for recipe community features');\r\n      setIsConnected(true); // Mark socket as connected\r\n      // Join the recipe room\r\n      newSocket.emit('join-recipe', {\r\n        recipeId: recipe.id,\r\n        userId,\r\n        username\r\n      });\r\n    });\r\n\r\n    newSocket.on('recipe-data', (data) => {\r\n      console.log('Received recipe community data:', data);\r\n      setComments(data.comments || []);\r\n      setRatings(data.ratings || []);\r\n      setAverageRating(data.averageRating || 0);\r\n      setTotalRatings(data.totalRatings || 0);\r\n    });\r\n\r\n    newSocket.on('comment-added', (newComment) => {\r\n      console.log('New comment received:', newComment);\r\n      setComments((prevComments) => [newComment, ...prevComments]);\r\n    });\r\n\r\n    newSocket.on('rating-updated', (data) => {\r\n      setRatings((prevRatings) => [data.rating, ...prevRatings]);\r\n      setAverageRating(data.averageRating);\r\n      setTotalRatings(data.totalRatings);\r\n    });\r\n\r\n    newSocket.on('connect_error', (err) => {\r\n      console.error('Socket connection error:', err.message);\r\n    });\r\n\r\n    // Save socket in ref to avoid re-render\r\n    socketRef.current = newSocket;\r\n\r\n    // Clean up on unmount\r\n    return () => {\r\n      if (newSocket) {\r\n        newSocket.disconnect();\r\n        setIsConnected(false); // Mark socket as disconnected\r\n      }\r\n    };\r\n  }, [recipe.id, userId, username, showUserPrompt]);\r\n\r\n  // Handle setting username\r\n  const handleSetUsername = (e) => {\r\n    e.preventDefault();\r\n    if (username.trim().length > 0) {\r\n      setShowUserPrompt(false);\r\n      localStorage.setItem('username', username);\r\n    }\r\n  };\r\n\r\n  // Handle submitting a comment\r\n  const handleAddComment = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!newComment.trim()) return;\r\n    \r\n    // Debugging connection state\r\n    console.log('Socket connection status:', socketRef.current ? socketRef.current.connected : 'No socket');\r\n\r\n    if (!socketRef.current || !socketRef.current.connected) {\r\n      console.error('Socket connection not found. Comment not sent.');\r\n      alert('Socket connection not found. Please try again later.');\r\n      return;\r\n    }\r\n\r\n    console.log('Sending comment:', newComment);\r\n    \r\n    socketRef.current.emit('add-comment', {\r\n      recipeId: recipe.id,\r\n      userId,\r\n      username,\r\n      text: newComment,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n\r\n    setNewComment('');\r\n  };\r\n\r\n  // Handle submitting a rating\r\n  const handleAddRating = (rating) => {\r\n    if (!socketRef.current || !socketRef.current.connected) return;\r\n    \r\n    setUserRating(rating);\r\n    socketRef.current.emit('add-rating', {\r\n      recipeId: recipe.id,\r\n      userId,\r\n      username,\r\n      rating,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  };\r\n\r\n  // Format date\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString();\r\n  };\r\n\r\n  // Render stars based on rating\r\n  // const renderStars = (rating) => {\r\n  //   const stars = [];\r\n  //   const fullStars = Math.floor(rating);\r\n  //   const hasHalfStar = rating % 1 >= 0.5;\r\n    \r\n  //   for (let i = 0; i < fullStars; i++) {\r\n  //     stars.push(\r\n  //       <Star \r\n  //         key={`full-${i}`} \r\n  //         className=\"text-yellow-500\" \r\n  //         fill=\"#EAB308\" \r\n  //         size={16}\r\n  //       />\r\n  //     );\r\n  //   }\r\n    \r\n  //   if (hasHalfStar) {\r\n  //     stars.push(\r\n  //       <StarHalf \r\n  //         key=\"half\" \r\n  //         className=\"text-yellow-500\" \r\n  //         fill=\"#EAB308\" \r\n  //         size={16}\r\n  //       />\r\n  //     );\r\n  //   }\r\n    \r\n  //   return <div className=\"recipe-stars\">{stars}</div>;\r\n  // };\r\n\r\n  const renderStars = (rating) => {\r\n    return (\r\n      <div className=\"recipe-stars\" style={{ display: 'flex', alignItems: 'center', gap: '2px' }}>\r\n        {[1, 2, 3, 4, 5].map((star) => {\r\n          // Full star\r\n          if (star <= Math.floor(rating)) {\r\n            return (\r\n              <Star \r\n                key={`star-${star}`} \r\n                size={16} \r\n                fill=\"#EAB308\" \r\n                color=\"#EAB308\" \r\n                style={{ display: 'block', minWidth: '16px' }}\r\n              />\r\n            );\r\n          }\r\n          // Half star\r\n          else if (star === Math.ceil(rating) && rating % 1 >= 0.5) {\r\n            return (\r\n              <StarHalf \r\n                key={`star-${star}`} \r\n                size={16} \r\n                fill=\"#EAB308\" \r\n                color=\"#EAB308\" \r\n                style={{ display: 'block', minWidth: '16px' }}\r\n              />\r\n            );\r\n          }\r\n          // Empty star\r\n          else {\r\n            return (\r\n              <Star \r\n                key={`star-${star}`} \r\n                size={16} \r\n                fill=\"none\" \r\n                color=\"#cccccc\" \r\n                style={{ display: 'block', minWidth: '16px' }}\r\n              />\r\n            );\r\n          }\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // If username prompt is shown\r\n  if (showUserPrompt) {\r\n    return (\r\n      <div className=\"username-prompt-recipe\">\r\n        <h4>Join the Community</h4>\r\n        <p>Enter your name to rate and comment on recipes</p>\r\n        <form onSubmit={handleSetUsername}>\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            placeholder=\"Your name\"\r\n            className=\"username-input\"\r\n            required\r\n          />\r\n          <button type=\"submit\" className=\"username-submit-btn\">Join</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"community-recipe-item\">\r\n      <h3 className=\"recipe-title\">{recipe.title}</h3>\r\n      <img \r\n        src={recipe.image} \r\n        alt={recipe.title} \r\n        className=\"recipe-image\"\r\n      />\r\n      \r\n      {/* Rating section */}\r\n      {/* <div className=\"recipe-rating-section\">\r\n        <div className=\"current-rating\">\r\n          {averageRating > 0 ? (\r\n            <>\r\n              {renderStars(averageRating)}\r\n              <span className=\"rating-number\">{averageRating.toFixed(1)}</span>\r\n              <span className=\"rating-count\">({totalRatings})</span>\r\n            </>\r\n          ) : (\r\n            <span className=\"no-ratings\">No ratings yet</span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"user-rating\">\r\n          <p>Rate this recipe:</p>\r\n          <div className=\"star-rating\">\r\n            {[1, 2, 3, 4, 5].map((star) => (\r\n              <button\r\n                key={star}\r\n                onClick={() => handleAddRating(star)}\r\n                className={`star-btn ${userRating >= star ? 'active' : ''}`}\r\n              >\r\n                <Star \r\n                  fill={userRating >= star ? '#EAB308' : 'none'} \r\n                  color={userRating >= star ? '#EAB308' : '#cccccc'}\r\n                  size={20}\r\n                />\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div> */}\r\n      <div className=\"recipe-rating-section\" style={{ margin: '1rem 0' }}>\r\n  <div className=\"current-rating\" style={{ display: 'flex', alignItems: 'center' }}>\r\n    {averageRating > 0 ? (\r\n      <>\r\n        <StarRatingDisplay rating={averageRating} size={16} />\r\n        <span className=\"rating-count\" style={{ \r\n          fontSize: '0.8rem', \r\n          color: '#666',\r\n          marginLeft: '4px'\r\n        }}>\r\n          ({totalRatings})\r\n        </span>\r\n      </>\r\n    ) : (\r\n      <span className=\"no-ratings\" style={{ \r\n        fontStyle: 'italic', \r\n        color: '#666', \r\n        fontSize: '0.9rem' \r\n      }}>\r\n        No ratings yet\r\n      </span>\r\n    )}\r\n  </div>\r\n  \r\n  <div className=\"user-rating\" style={{ marginTop: '12px' }}>\r\n    <p style={{ \r\n      marginBottom: '8px', \r\n      fontSize: '0.9rem', \r\n      color: '#552b5b' \r\n    }}>\r\n      Rate this recipe:\r\n    </p>\r\n    <StarRatingInput \r\n      value={userRating} \r\n      onChange={handleAddRating} \r\n      size={20}\r\n    />\r\n  </div>\r\n</div>\r\n      \r\n      <ul className=\"recipe-details\">\r\n        <li>Used Ingredients: {recipe.usedIngredientCount}</li>\r\n        <li>Missed Ingredients: {recipe.missedIngredientCount}</li>\r\n        <li className=\"button-container\"> \r\n          <a\r\n            href={`https://spoonacular.com/recipes/${recipe.title}-${recipe.id}`} \r\n            target=\"_blank\" \r\n            rel=\"noopener noreferrer\"\r\n            className=\"recipe-link\"\r\n          > \r\n            View Full Recipe\r\n          </a>\r\n        </li>\r\n      </ul>\r\n      \r\n      {/* Comments section */}\r\n      <div className=\"recipe-comments-section\">\r\n        <button \r\n          className=\"toggle-comments-btn\"\r\n          onClick={() => setShowComments(!showComments)}\r\n        >\r\n          {showComments ? 'Hide Comments' : `Show Comments (${comments.length})`}\r\n        </button>\r\n        \r\n        {showComments && (\r\n          <div className=\"comments-container\">\r\n            <form onSubmit={handleAddComment} className=\"comment-form\">\r\n              <input\r\n                type=\"text\"\r\n                value={newComment}\r\n                onChange={(e) => setNewComment(e.target.value)}\r\n                placeholder=\"Add a comment...\"\r\n                className=\"comment-input\"\r\n              />\r\n              <button \r\n                type=\"submit\" \r\n                className=\"comment-submit-btn\"\r\n                disabled={!newComment.trim()}\r\n              >\r\n                Post\r\n              </button>\r\n            </form>\r\n            \r\n            <div className=\"comments-list\">\r\n              {comments.length > 0 ? (\r\n                comments.map((comment, index) => (\r\n                  <div key={index} className=\"comment-item\">\r\n                    <div className=\"comment-header\">\r\n                      <span className=\"comment-author\">{comment.username}</span>\r\n                      <span className=\"comment-date\">{formatDate(comment.timestamp)}</span>\r\n                    </div>\r\n                    <p className=\"comment-text\">{comment.text}</p>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p className=\"no-comments\">No comments yet. Be the first to comment!</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunityRecipeItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}