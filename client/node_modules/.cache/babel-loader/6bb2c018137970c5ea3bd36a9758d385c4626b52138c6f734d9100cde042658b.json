{"ast":null,"code":"// indexedDB.js\n// #offline\n\nconst DB_NAME = 'ACookbookDB';\nconst STORE_NAME = 'recipes';\nconst DB_VERSION = 1;\nexport function openDB() {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n    request.onupgradeneeded = e => {\n      const db = e.target.result;\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME, {\n          keyPath: '_id'\n        });\n        console.log('[IndexedDB] Object store created ✅');\n      }\n    };\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n}\n\n// Save all recipes from API\nexport async function saveRecipes(recipes) {\n  const db = await openDB();\n  const tx = db.transaction(STORE_NAME, 'readwrite');\n  const store = tx.objectStore(STORE_NAME);\n  recipes.forEach(recipe => {\n    store.put(recipe);\n    console.log('[IndexedDB] Saved recipe:', recipe.title); // debug\n  });\n  await tx.done;\n  db.close();\n}\n\n// Get all recipes for offline use\nexport async function getStoredRecipes() {\n  const db = await openDB();\n  const tx = db.transaction(STORE_NAME, 'readonly');\n  const store = tx.objectStore(STORE_NAME);\n  const all = await store.getAll();\n  db.close();\n  console.log('[IndexedDB] Retrieved', all.length, 'recipes');\n  return all;\n}","map":{"version":3,"names":["DB_NAME","STORE_NAME","DB_VERSION","openDB","Promise","resolve","reject","request","indexedDB","open","onupgradeneeded","e","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","console","log","onsuccess","onerror","error","saveRecipes","recipes","tx","transaction","store","objectStore","forEach","recipe","put","title","done","close","getStoredRecipes","all","getAll","length"],"sources":["C:/Users/DELL/OneDrive/Desktop/MS USA/IIT Chicago/Build Fellowship Project 1 Real time feature/a-cookbook/client/src/indexedDB.js"],"sourcesContent":["// indexedDB.js\r\n// #offline\r\n\r\nconst DB_NAME = 'ACookbookDB';\r\nconst STORE_NAME = 'recipes';\r\nconst DB_VERSION = 1;\r\n\r\nexport function openDB() {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n    request.onupgradeneeded = (e) => {\r\n      const db = e.target.result;\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        db.createObjectStore(STORE_NAME, { keyPath: '_id' });\r\n        console.log('[IndexedDB] Object store created ✅');\r\n      }\r\n    };\r\n\r\n    request.onsuccess = () => resolve(request.result);\r\n    request.onerror = () => reject(request.error);\r\n  });\r\n}\r\n\r\n// Save all recipes from API\r\nexport async function saveRecipes(recipes) {\r\n  const db = await openDB();\r\n  const tx = db.transaction(STORE_NAME, 'readwrite');\r\n  const store = tx.objectStore(STORE_NAME);\r\n  recipes.forEach(recipe => {\r\n    store.put(recipe);\r\n    console.log('[IndexedDB] Saved recipe:', recipe.title); // debug\r\n  });\r\n  await tx.done;\r\n  db.close();\r\n}\r\n\r\n// Get all recipes for offline use\r\nexport async function getStoredRecipes() {\r\n  const db = await openDB();\r\n  const tx = db.transaction(STORE_NAME, 'readonly');\r\n  const store = tx.objectStore(STORE_NAME);\r\n  const all = await store.getAll();\r\n  db.close();\r\n  console.log('[IndexedDB] Retrieved', all.length, 'recipes');\r\n  return all;\r\n}\r\n"],"mappings":"AAAA;AACA;;AAEA,MAAMA,OAAO,GAAG,aAAa;AAC7B,MAAMC,UAAU,GAAG,SAAS;AAC5B,MAAMC,UAAU,GAAG,CAAC;AAEpB,OAAO,SAASC,MAAMA,CAAA,EAAG;EACvB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,OAAO,GAAGC,SAAS,CAACC,IAAI,CAACT,OAAO,EAAEE,UAAU,CAAC;IAEnDK,OAAO,CAACG,eAAe,GAAIC,CAAC,IAAK;MAC/B,MAAMC,EAAE,GAAGD,CAAC,CAACE,MAAM,CAACC,MAAM;MAC1B,IAAI,CAACF,EAAE,CAACG,gBAAgB,CAACC,QAAQ,CAACf,UAAU,CAAC,EAAE;QAC7CW,EAAE,CAACK,iBAAiB,CAAChB,UAAU,EAAE;UAAEiB,OAAO,EAAE;QAAM,CAAC,CAAC;QACpDC,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;MACnD;IACF,CAAC;IAEDb,OAAO,CAACc,SAAS,GAAG,MAAMhB,OAAO,CAACE,OAAO,CAACO,MAAM,CAAC;IACjDP,OAAO,CAACe,OAAO,GAAG,MAAMhB,MAAM,CAACC,OAAO,CAACgB,KAAK,CAAC;EAC/C,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,eAAeC,WAAWA,CAACC,OAAO,EAAE;EACzC,MAAMb,EAAE,GAAG,MAAMT,MAAM,CAAC,CAAC;EACzB,MAAMuB,EAAE,GAAGd,EAAE,CAACe,WAAW,CAAC1B,UAAU,EAAE,WAAW,CAAC;EAClD,MAAM2B,KAAK,GAAGF,EAAE,CAACG,WAAW,CAAC5B,UAAU,CAAC;EACxCwB,OAAO,CAACK,OAAO,CAACC,MAAM,IAAI;IACxBH,KAAK,CAACI,GAAG,CAACD,MAAM,CAAC;IACjBZ,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEW,MAAM,CAACE,KAAK,CAAC,CAAC,CAAC;EAC1D,CAAC,CAAC;EACF,MAAMP,EAAE,CAACQ,IAAI;EACbtB,EAAE,CAACuB,KAAK,CAAC,CAAC;AACZ;;AAEA;AACA,OAAO,eAAeC,gBAAgBA,CAAA,EAAG;EACvC,MAAMxB,EAAE,GAAG,MAAMT,MAAM,CAAC,CAAC;EACzB,MAAMuB,EAAE,GAAGd,EAAE,CAACe,WAAW,CAAC1B,UAAU,EAAE,UAAU,CAAC;EACjD,MAAM2B,KAAK,GAAGF,EAAE,CAACG,WAAW,CAAC5B,UAAU,CAAC;EACxC,MAAMoC,GAAG,GAAG,MAAMT,KAAK,CAACU,MAAM,CAAC,CAAC;EAChC1B,EAAE,CAACuB,KAAK,CAAC,CAAC;EACVhB,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEiB,GAAG,CAACE,MAAM,EAAE,SAAS,CAAC;EAC3D,OAAOF,GAAG;AACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}