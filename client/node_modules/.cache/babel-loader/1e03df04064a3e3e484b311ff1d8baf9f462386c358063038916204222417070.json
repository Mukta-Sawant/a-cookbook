{"ast":null,"code":"// indexedDB.js\nconst DB_NAME='ACookbookDB';const STORE_NAME='recipes';const DB_VERSION=1;export function openDB(){return new Promise((resolve,reject)=>{const request=indexedDB.open(DB_NAME,DB_VERSION);request.onupgradeneeded=e=>{const db=e.target.result;if(!db.objectStoreNames.contains(STORE_NAME)){db.createObjectStore(STORE_NAME,{keyPath:'_id'});}};request.onsuccess=()=>resolve(request.result);request.onerror=()=>reject(request.error);});}export async function saveRecipes(recipes){const db=await openDB();const tx=db.transaction(STORE_NAME,'readwrite');const store=tx.objectStore(STORE_NAME);recipes.forEach(recipe=>store.put(recipe));}export async function getStoredRecipes(){const db=await openDB();const tx=db.transaction(STORE_NAME,'readonly');const store=tx.objectStore(STORE_NAME);return new Promise((resolve,reject)=>{const request=store.getAll();request.onsuccess=()=>{var _request$result;console.log('[IndexedDB] Retrieved',(_request$result=request.result)===null||_request$result===void 0?void 0:_request$result.length,'recipes');resolve(request.result||[]);};request.onerror=()=>{console.error('Error getting from IndexedDB:',request.error);reject([]);};});}","map":{"version":3,"names":["DB_NAME","STORE_NAME","DB_VERSION","openDB","Promise","resolve","reject","request","indexedDB","open","onupgradeneeded","e","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","error","saveRecipes","recipes","tx","transaction","store","objectStore","forEach","recipe","put","getStoredRecipes","getAll","_request$result","console","log","length"],"sources":["C:/Users/DELL/OneDrive/Desktop/MS USA/IIT Chicago/Build Fellowship Project 1 Real time feature/a-cookbook/client/src/indexedDB.js"],"sourcesContent":["// indexedDB.js\r\nconst DB_NAME = 'ACookbookDB';\r\nconst STORE_NAME = 'recipes';\r\nconst DB_VERSION = 1;\r\n\r\nexport function openDB() {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n    request.onupgradeneeded = (e) => {\r\n      const db = e.target.result;\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        db.createObjectStore(STORE_NAME, { keyPath: '_id' });\r\n      }\r\n    };\r\n    request.onsuccess = () => resolve(request.result);\r\n    request.onerror = () => reject(request.error);\r\n  });\r\n}\r\n\r\nexport async function saveRecipes(recipes) {\r\n  const db = await openDB();\r\n  const tx = db.transaction(STORE_NAME, 'readwrite');\r\n  const store = tx.objectStore(STORE_NAME);\r\n  recipes.forEach(recipe => store.put(recipe));\r\n}\r\n\r\nexport async function getStoredRecipes() {\r\n  const db = await openDB();\r\n  const tx = db.transaction(STORE_NAME, 'readonly');\r\n  const store = tx.objectStore(STORE_NAME);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const request = store.getAll();\r\n    request.onsuccess = () => {\r\n      console.log('[IndexedDB] Retrieved', request.result?.length, 'recipes');\r\n      resolve(request.result || []);\r\n    };\r\n    request.onerror = () => {\r\n      console.error('Error getting from IndexedDB:', request.error);\r\n      reject([]);\r\n    };\r\n  });\r\n}\r\n"],"mappings":"AAAA;AACA,KAAM,CAAAA,OAAO,CAAG,aAAa,CAC7B,KAAM,CAAAC,UAAU,CAAG,SAAS,CAC5B,KAAM,CAAAC,UAAU,CAAG,CAAC,CAEpB,MAAO,SAAS,CAAAC,MAAMA,CAAA,CAAG,CACvB,MAAO,IAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtC,KAAM,CAAAC,OAAO,CAAGC,SAAS,CAACC,IAAI,CAACT,OAAO,CAAEE,UAAU,CAAC,CACnDK,OAAO,CAACG,eAAe,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAAC,EAAE,CAAGD,CAAC,CAACE,MAAM,CAACC,MAAM,CAC1B,GAAI,CAACF,EAAE,CAACG,gBAAgB,CAACC,QAAQ,CAACf,UAAU,CAAC,CAAE,CAC7CW,EAAE,CAACK,iBAAiB,CAAChB,UAAU,CAAE,CAAEiB,OAAO,CAAE,KAAM,CAAC,CAAC,CACtD,CACF,CAAC,CACDX,OAAO,CAACY,SAAS,CAAG,IAAMd,OAAO,CAACE,OAAO,CAACO,MAAM,CAAC,CACjDP,OAAO,CAACa,OAAO,CAAG,IAAMd,MAAM,CAACC,OAAO,CAACc,KAAK,CAAC,CAC/C,CAAC,CAAC,CACJ,CAEA,MAAO,eAAe,CAAAC,WAAWA,CAACC,OAAO,CAAE,CACzC,KAAM,CAAAX,EAAE,CAAG,KAAM,CAAAT,MAAM,CAAC,CAAC,CACzB,KAAM,CAAAqB,EAAE,CAAGZ,EAAE,CAACa,WAAW,CAACxB,UAAU,CAAE,WAAW,CAAC,CAClD,KAAM,CAAAyB,KAAK,CAAGF,EAAE,CAACG,WAAW,CAAC1B,UAAU,CAAC,CACxCsB,OAAO,CAACK,OAAO,CAACC,MAAM,EAAIH,KAAK,CAACI,GAAG,CAACD,MAAM,CAAC,CAAC,CAC9C,CAEA,MAAO,eAAe,CAAAE,gBAAgBA,CAAA,CAAG,CACvC,KAAM,CAAAnB,EAAE,CAAG,KAAM,CAAAT,MAAM,CAAC,CAAC,CACzB,KAAM,CAAAqB,EAAE,CAAGZ,EAAE,CAACa,WAAW,CAACxB,UAAU,CAAE,UAAU,CAAC,CACjD,KAAM,CAAAyB,KAAK,CAAGF,EAAE,CAACG,WAAW,CAAC1B,UAAU,CAAC,CAExC,MAAO,IAAI,CAAAG,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtC,KAAM,CAAAC,OAAO,CAAGmB,KAAK,CAACM,MAAM,CAAC,CAAC,CAC9BzB,OAAO,CAACY,SAAS,CAAG,IAAM,KAAAc,eAAA,CACxBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAAF,eAAA,CAAE1B,OAAO,CAACO,MAAM,UAAAmB,eAAA,iBAAdA,eAAA,CAAgBG,MAAM,CAAE,SAAS,CAAC,CACvE/B,OAAO,CAACE,OAAO,CAACO,MAAM,EAAI,EAAE,CAAC,CAC/B,CAAC,CACDP,OAAO,CAACa,OAAO,CAAG,IAAM,CACtBc,OAAO,CAACb,KAAK,CAAC,+BAA+B,CAAEd,OAAO,CAACc,KAAK,CAAC,CAC7Df,MAAM,CAAC,EAAE,CAAC,CACZ,CAAC,CACH,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}